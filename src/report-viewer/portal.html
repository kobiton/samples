<html>

<head>
  <% include ./header %>
</head>

<body>
  <div style="margin-left: 10px; margin-right: 10px;">
    <% include ./header_menu_search_form %>
    <div class="jumbotron" style="padding-top: 20px; padding-bottom: 5px; font-size: 14px;">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-2">
            <h4 class="col-lg-offset-1">Report Date</h4>
            <ul class="list-group" style="max-height: 600px; overflow-y: auto; border: 1px solid rgb(76, 175, 80);">
              <% if(folderList === undefined || folderList.length == 0){ %>
                  <h3 class="list-group-item" style="text-align:center;">No Results Found</h3>
              <% } else {%>
              <% folderList.forEach( function( result ) { %>
                <li class="list-group-item" style="padding: 15px 15px 0px 30px;">
                  <a data-toggle="tooltip" title=<%= result.name  %> href=<%= prefix %><%= result.name %>><%= result.name  %></a>
                  <p><%= result.data  %></p>
                </li>
                <% })} %>
            </ul>
          </div>
          <div class="col-md-10" style="max-height: 600px; overflow-y: auto;">
            <ul class="nav nav-tabs" role="tablist">
              <li role="presentation" class="active"><a href="#chrome" aria-controls="chrome" role="tab" data-toggle="tab">Chrome Results</a></li>
              <li role="presentation"><a href="#firefox" aria-controls="firefox" role="tab" data-toggle="tab">Firefox Results</a></li>
              <li role="presentation"><a href="#phantomjs" aria-controls="phantomjs" role="tab" data-toggle="tab">PhantomJS Results</a></li>
            </ul>
            <% if(results === undefined || results.length == 0){ %>
              <h3 class="list-group-item" style="text-align:center;">No Results Found</h3>
            <% } else { %>
            <div class="tab-content">
              <% results.forEach( function(result, index) { %>
                <% const className = index == 0 ? 'tab-pane fade in active' : 'tab-pane fade' %>
                  <div role="tabpanel" id=<%= result.data.capabilities.browserName %> class="<%= className %>">
                    <ul class="list-group">
                      <li class="list-group-item" style="padding: 15px 15px 0px 30px;">
                        <p class="header">Session Information</p>
                        <p>Browser Name: <%= result.data.capabilities.browserName %></p>
                        <p>Start Time: <%= result.data.start %></p>
                        <p>End Time: <%= result.data.end %></p>
                        <p class="header">Server Information</p>
                        <p>Host: <%= result.data.host %></p>
                        <p>Port: <%= result.data.port %></p>
                        <p>BaseUrl: <%= result.data.baseUrl %></p>
                        <% result.data.suites.forEach( function(suite, suiteIndex) { %>
                          <a data-toggle="collapse" data-target=#<%= result.data.capabilities.browserName %>testsuite<%= suiteIndex + 1 %>>Test Suite (<%= suiteIndex + 1 %>)</a>
                          <div id=<%= result.data.capabilities.browserName %>testsuite<%= suiteIndex + 1 %> class="collapse" style="font-size: 14px; padding: 15px; border: 1px solid rgb(92, 184, 92); background-color: white;">
                            <p class="header">Test Suite (<%= suiteIndex + 1 %>)</p>
                            <p>Suite Name: <%= suite.name %></p>
                            <p>Start Time: <%= suite.start %></p>
                            <p>End Time: <%= suite.end %></p>
                            <p>Duration: <%= suite.duration %></p>
                            <% suite.tests.forEach( function(test, testIndex) { %>
                              <a data-toggle="collapse" data-target=#<%= result.data.capabilities.browserName %>testsuite<%= suiteIndex + 1 %>testcase<%= testIndex + 1 %>>Test Case (<%= testIndex + 1 %>)</a>
                              <div id=<%= result.data.capabilities.browserName %>testsuite<%= suiteIndex + 1 %>testcase<%= testIndex + 1 %> class="collapse" style="font-size: 14px; padding: 30px; border: 1px solid rgb(92, 184, 92); background-color: white;">
                                <p class="header">Test Case (<%= testIndex + 1 %>)</p>
                                <p>Test Name: <%= test.name %></p>
                                <p>Start Time: <%= test.start %></p>
                                <p>End Time: <%= test.end %></p>
                                <p>Duration: <%= test.duration %></p>
                                <% if (test.state === 'pass') { %>
                                  <p class="bg-success">State: <%= test.state %></p>
                                <% } else { %>
                                  <p class="bg-danger">State: <%= test.state %></p>
                                  <p class="bg-danger"><%= test.standardError %></p>
                                <% } %>
                              </div>
                             <% }) %>
                            </div>
                        <% }) %>
                      </li>
                    </ul>
                  </div>
                <% })} %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
</body>

</html>
